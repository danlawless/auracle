#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Validate commit message format
# Format: [emoji] Imperative verb + description
# Example: ‚ú® Add user authentication

commit_msg=$(cat "$1")

# Check if commit message starts with an emoji (optional) and has descriptive text
if ! echo "$commit_msg" | grep -qE '^(\p{Emoji}|[A-Z])'; then
  echo "‚ùå Invalid commit message format!"
  echo ""
  echo "Expected format: [emoji] Imperative verb + description"
  echo "Example: ‚ú® Add user authentication"
  echo "Example: üêõ Fix navigation bug"
  echo "Example: Add user profile page (emoji optional)"
  echo ""
  echo "Your message: $commit_msg"
  exit 1
fi

# Check minimum length
if [ ${#commit_msg} -lt 10 ]; then
  echo "‚ùå Commit message too short (minimum 10 characters)"
  echo "Your message: $commit_msg"
  exit 1
fi

echo "‚úÖ Commit message format valid"

